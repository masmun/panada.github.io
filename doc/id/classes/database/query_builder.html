<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Panada PHP Framework 1.1.0 Documentation - Database Query Builder</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="../../../bootstrap/css/bootstrap.min.css" rel="stylesheet">
<link href="../../../bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet">
<!--[if lt IE 9]>
  <script src="http://html5shim.googlepre.com/svn/trunk/html5.js"></script>
<![endif]-->
</head>
<body>
<div class="navbar navbar-static-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="http://panadaframework.com/" style="padding: 10px 20px 0px;"><img src="../../../images/logosimple.png"></a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li><a href="http://panadaframework.com/">Home</a></li>
	      <li><a href="https://github.com/panada/Panada">Source</a></li>
		<li class="active"><a href="http://panadaframework.com/documentation/id/">Doc</a></li>
		<li><a href="https://github.com/panada/Panada">Help and Report</a></li>
		<li><a href="http://panadaframework.com/blog/">Blog</a></li>
		<li><a href="http://twitter.com/panadaframework">Twitter</a></li>
            </ul>
            <form class="navbar-form pull-right" action="http://www.google.com/search" method="get">
                <input type="hidden" value="panadaframework.com/documentation/" id="as_sitesearch" name="as_sitesearch">
                <div class="input-append">
                    <input class="span2" id="appendedInputButton" type="text" name="q" placeholder="Search...">
                    <button class="btn" type="button"><i class="icon-search"></i></button>
                </div>
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
</div>
<div class="container-fluid">
    <div class="page-header">
        <h1>Panada Framework 1.1.0 Documentation</h1>
    </div>
    <div class="row-fluid">
        <div class="span3">
            <div class="sidebar-nav">
                <ul class="nav nav-list">
                    <li class="nav-header"><a href="../../index.html" class="muted">Umum</a></li>
                    <li><a href="../../index.html#about">Tentang Panada</a></li>
                    <li><a href="../../index.html#feature">Keunggulan (<em>Feature</em>)</a></li>
                    <li><a href="../../index.html#requirement">Requirement</a></li>
                    <li><a href="../../index.html#license">Lisensi</a></li>
                    <li class="divider"></li>
                    <li class="nav-header"><a href="../../config.html" class="muted">Konfigurasi</a></li>
                    <li><a href="../../config.html#general">Dasar</a></li>
                    <li><a href="../../config.html#additional_config">Tambahan</a></li>
                    <li><a href="../../config.html#webserver">Webserver</a></li>
                    <li class="divider"></li>
                    <li class="nav-header">Referensi</li>
                    <li><a href="../../references/controller.html">Controller</a></li>
                    <li><a href="../../references/model.html">Model</a></li>
                    <li><a href="../../references/view.html">View</a></li>
                    <li><a href="../../references/library.html">Library</a></li>
                    <li><a href="../../references/autoloader.html">Auto Loader</a></li>
                    <li><a href="../../references/global_method.html">Global Method dan Properties</a></li>
                    <li><a href="../../references/module.html">Module</a></li>
                    <li><a href="../../references/vendor.html">Vendor</a></li>
                    <li><a href="../../references/upgrade.html">Upgrade</a></li>
                    <li class="divider"></li>
                    <li class="nav-header"><a href="../../classes/index.html" class="muted">Resources</a></li>
                    <li class="active"><a href="index.html">Database</a></li>
		    <li>
			<ul>
			    <li><a href="query_builder.html">Query Builder</a></li>
			    <li><a href="activerecord.html">Active Record</a></li>
			    <li><a href="manual_query.html">Manual Query</a></li>
			    <li><a href="mongodb.html">Mongodb</a></li>
			</ul>
		    </li>
                    <li><a href="../../classes/cache/index.html">Cache</a></li>
                    <li><a href="../../classes/session.html">Session</a></li>
                    <li><a href="../../classes/pagination.html">Pagination</a></li>
                    <li><a href="../../classes/email.html">Email</a></li>
                    <li><a href="../../classes/encryption.html">Encryption</a></li>
                    <li><a href="../../classes/upload.html">Upload</a></li>
                    <li><a href="../../classes/image.html">Image</a></li>
                    <li><a href="../../classes/request.html">Request</a></li>
                    <li><a href="../../classes/rest.html">RESTfull</a></li>
                    <li><a href="../../classes/tools.html">Tools</a></li>
                    <li><a href="../../classes/validation.html">Form Validation</a></li>
                    <li class="divider"></li>
                    <li><a href="../../contribution.html">Kontribusi</a></li>
                    <li><a href="../../credit.html">Credit</a></li>
                </ul>
            </div>
        </div>
      <div class="span9">
	<div class="row-fluid">
                <div class="page-header"><h2>Query Builder</h2></div>
                <p>Query Builder membantu Anda untuk membuat query database secara dinamis dengan lebih cepat. Sebagian besar penggunaan
                method diakses dengan cara <strong>Method Chaining</strong>.</p>
		<p>Untuk menggunakan feature ini pastikan konfigurasi koneksi ke database sudah benar. Untuk detail panduan koneksi database, silahkan klik di halaman <a href="index.html#config">configuration</a>.</p>
            </div>
	    
	    <div class="row-fluid">
		<div class="page-header"><h2 id="select">Select</h2></div>
		<p>Untuk mendapatkan data dari semua kolom tabel:</p>
		<pre>$data = $this->db-><strong>select()</strong>->from('users')->getAll();</pre>
		
		<p>Method ini menghasilkan output data SQL:</p>
		<pre><strong>SELECT *</strong> FROM users</pre>
		<p>Untuk mendapatkan beberapa kolom dari tabel:</p>
<pre>
$data = $this->db-><strong>select('id', 'name')</strong>->from('users')->getAll();<br />
// atau bisa juga<br />
$data = $this->db-><strong>select( array('id', 'name') )</strong>->from('users')->getAll();
</pre>
		<p>Method ini menghasilkan output data SQL:</p>
<pre>
<strong>SELECT id, name</strong> FROM users
</pre>
                <p>Fungsi SQL juga bisa diisikan pada argument <strong>select()</strong>:</p>
<pre>
$data = $this->db-><strong>select('COUNT(*)')</strong>->from('users')->getVar();
</pre>
		<p>Method ini menghasilkan output data SQL:</p>
<pre>
<strong>SELECT COUNT(*)</strong> FROM users
</pre>
		
	    </div>
	    
	    <div class="row-fluid">
		<div class="page-header"><h2 id="distinct">Distinct</h2></div>
                <p>Berikut adalah contoh penggunaan statetment <strong>distinct</strong>:</p>
<pre>
$data = $this->db->select('name')-><strong>distinct()</strong>->from('users')->limit(10)->getAll();
</pre>
		<p>Method ini menghasilkan output data SQL:</p>
<pre>
SELECT <strong>DISTINCT</strong> name FROM users LIMIT 10
</pre>
            </div>
            
            <div class="row-fluid">
		<div class="page-header"><h2 id="from">From</h2></div>
                <p>Method <strong>from()</strong> dari contoh-contoh yang ada merepresentasikan dari nama tabel.
<pre>
$data = $this->db->select()-><strong>from('users')</strong>->getAll();
</pre>
		<p>Method ini menghasilkan output data SQL:</p>
<pre>
SELECT * FROM <strong>users</strong>
</pre>
		<p>Nilai argument bisa berupa <strong>string</strong> ataupun <strong>array</strong>.</p>
<pre>
$data = $this->db->select()-><strong>from('users', 'posts')</strong>->where('users.id', '=', 'posts.post_author')->getAll();<br />
// atau<br />
$data = $this->db->select()-><strong>from( array('users', 'posts') )</strong>->where('users.id', '=', 'posts.post_author')->getAll();
</pre>
		<p>Method ini menghasilkan output data SQL:</p>
<pre>
SELECT * <strong>FROM users, posts</strong> WHERE users.id = posts.post_author
</pre>
            </div>
	    
	    <div class="row-fluid">
		<div class="page-header"><h2 id="join">Join</h2></div>
		<p>Untuk melakukan query dari beberapa tabel, method <strong>join()</strong> bisa digunakan. Penggunaan method ini diikuti penggunaan method <strong>on()</strong>.
<pre>
$data = $this->db->select('users.name', 'posts.post')->from('users')-><strong>join('posts')->on('users.id', '=', 'posts.post_author')</strong>;
</pre>
		<p>Method ini menghasilkan output data SQL:</p>
<pre>
SELECT users.name, posts.post FROM users <strong>JOIN posts ON (users.id = posts.post_author)</strong>
</pre>
		<p>Anda juga bisa menambahkan tipe join seperti <strong>LEFT</strong>, <strong>RIGHT</strong> dan <strong>INNER</strong> pada argument ke dua di dalam method <strong>join()</strong>.
<pre>
$data = $this->db->select('users.name', 'posts.post')->from('users')-><strong>join('posts', 'RIGHT')->on('users.id', '=', 'posts.post_author')</strong>;
</pre>
		<p>Method ini menghasilkan output data SQL:</p>
<pre>
SELECT users.name, posts.post FROM users <strong>RIGHT JOIN posts ON (users.id = posts.post_author)</strong>
</pre>
	    </div>
            
	    <div class="row-fluid">
		<div class="page-header"><h2 id="where">Where</h2></div>
		<p>Untuk membatasi hasil pencarian Anda bisa menggunakan method <strong>where()</strong>.
		
<pre>
<b>object</b> where( string $column, string $operator, string $value, mix $seperator = false);
</pre>
                
                <h4>Parameter</h4>
                <table class="table table-bordered">
		    <thead>
			<tr>
			    <th scope="col">Variable</th>
			    <th scope="col">Tipe Data</th>
			    <th scope="col">Keterangan</th>
			</tr>
		    </thead>
		<tbody>
		    <tr>
			<td>$column</td>
			<td>string</td>
			<td>Nama kolom yang menjadi kriteria penyeleksian.</td>
		    </tr>
		    <tr class="odd">
			<td>$operator</td>
			<td>string</td>
			<td>Operator SQL: IN, BETWEEN, >, =<, !=</td>
		    </tr>
                    <tr>
			<td>$value</td>
			<td>string | array</td>
			<td>Nilai yang akan dibandingkan dengan kolom.</td>
		    </tr>
		    <tr class="odd">
			<td>$seperator</td>
			<td>mix</td>
			<td>Operator pemisah antara kondisi sebelum dan kondisi sesudah. Contoh: OR, AND</td>
		    </tr>
                    
		</tbody>
		</table>
		
		<p>Berikut contoh penggunaan method ini:</p>
<pre>
$data = $this->db->select()->from('users')-><strong>where('id', '=', 1)</strong>->getOne(); 
</pre>
		<p>Method ini menghasilkan output data SQL:</p>
<pre>
SELECT * FROM users WHERE id = 1
</pre>
		<p>Jika penyeleksian data lebih dari satu kondisi:</p>
<pre>
$data = $this->db->select()->from('users')-><strong>where('id', '=', 1, 'OR')</strong>-><strong>where('email', '=', 'kandar@kandar.com')</strong>->getOne();
</pre>
		<p>Penggunaan operator <strong>IN</strong>:</p>
<pre>
$data = $this->db->select()->from('users')-><strong>where('id', 'IN', array(1,4,7))</strong>->getAll();
</pre>
		<p>Method ini menghasilkan output data SQL:</p>
<pre>
SELECT * FROM users WHERE id IN 1,4,7
</pre>
		<p>Penggunaan operator <strong>BETWEEN</strong>:</p>
<pre>
$data = $this->db->select()->from('users')-><strong>where('id', 'BETWEEN', array(1,7))</strong>->getAll();
</pre>
		<p>Method ini menghasilkan output data SQL:</p>
<pre>
SELECT * FROM users WHERE id BETWEEN 1 AND 7
</pre>
		
	    </div>
	    
	    <div class="row-fluid">
		<div class="page-header"><h2 id="groupBy">Group By</h2></div>
                <p>Penggunaan method <strong>groupBy()</strong>:</p>
<pre>
$data = $this->db->select('id', 'name')->from('users')-><strong>groupBy('name', 'id')</strong>->limit(10)->getAll();
</pre>
		<p>Method ini menghasilkan output data SQL:</p>
<pre>
SELECT id, name FROM users <strong>GROUP BY</strong> name, id LIMIT 10
</pre>
            </div>
	    
	    <div class="row-fluid">
		<div class="page-header"><h2 id="having">Having</h2></div>
		<p>Berikut adalah contoh cara menggunakan method <strong>having()</strong>:</p>
<pre>
$data = $this->db->select('id', 'post_title')->from('posts')->groupBy('post_author','id', 'post_title')-><strong>having('COUNT(id)', '>=', 2)</strong>->getAll();
</pre>
		<p>Method ini menghasilkan output data SQL:</p>
<pre>
SELECT * FROM posts GROUP BY post_author <strong>HAVING COUNT(id) >= 2</strong>
</pre>
	    </div>
            
            <div class="row-fluid">
		<div class="page-header"><h2 id="orderBy">Order By</h2></div>
                <p>Untuk mengurutkan hasil pencarian data, Anda bisa menggunakan method <strong>orderBy()</strong></p>
<pre>
$data = $this->db->select()->from('users')-><strong>orderBy('id')</strong>->getAll();
</pre>
		<p>Method ini menghasilkan output data SQL:</p>
<pre>
SELECT * FROM users <strong>ORDER BY</strong> id
</pre>
                <p>Cara yang lain:</p>
<pre>
$data = $this->db->select()->from('users')-><strong>orderBy('id', 'DESC')</strong>->getAll();
</pre>
		<p>Method ini menghasilkan output data SQL:</p>
<pre>
SELECT * FROM users <strong>ORDER BY</strong> id DESC
</pre>
                <p>Penggunaan dengan method <strong>where()</strong>:</p>
<pre>
$data = $this->db->select()->from('users')->where('id', '>', 1)-><strong>orderBy('id', 'DESC')</strong>->getAll();
</pre>
		<p>Method ini menghasilkan output data SQL:</p>
<pre>
SELECT * FROM users WHERE id > 1 <strong>ORDER BY</strong> id DESC
</pre>
            </div>
            
            <div class="row-fluid">
		<div class="page-header"><h2 id="limit">Limit</h2></div>
                <p>Argument pertama digunakan untuk menentukan jumlah limit. Berikut adalah cara penggunaan method <strong>limit()</strong>:</p>
<pre>
$data = $this->db->select()->from('users')->where('id', '>', 1)->orderBy('id', 'DESC')-><strong>limit(3)</strong>->getAll();
</pre>
		<p>Method ini menghasilkan output data SQL:</p>
<pre>
SELECT * FROM users WHERE id > 1 ORDER BY id DESC <strong>LIMIT 3</strong>
</pre>
                <p>Sedangkan argument ke dua digunakan untuk menentukan nilai offset:</p>
<pre>
$data = $this->db->select()->from('users')->where('id', '>', 1)->orderBy('id', 'DESC')-><strong>limit(6,2)</strong>->getAll();
</pre>
		<p>Method ini menghasilkan output data SQL:</p>
<pre>
SELECT * FROM users WHERE id > 1 ORDER BY id DESC <strong>LIMIT 6 OFFSET 2</strong>
</pre>
            </div>
	    
	    <div class="row-fluid">
		<div class="page-header"><h2 id="command">Command</h2></div>
		<p>Jika Anda ingin melihat output SQL dari <em>method chain</em> yang sudah dibuat, silahkan gunakan method <strong>command()</strong>.</p>
<pre>
$sql = $this->db->select()->from('users')->groupBy('name')->limit(10)->command();<br />
die($sql);
</pre>
	    </div>
	    
	    <div class="row-fluid">
                <div class="page-header"><h2 id="Insert_id">Insert Id</h2></div>
		
		<p>Untuk mendapatkan id dari proses insert terakhir, bisa menggunakan properties <strong>$this->db->insertId()</strong>.</p>
<pre>
$this->db->query("INSERT INTO table_name (field_1, field_2) VALUES ('budi', 'budi@budi.com')");
<br /><br />echo $this->db->insertId();
</pre>
	    </div>
	    
	    <div class="row-fluid">
                <div class="page-header"><h2 id="getOne">Get One</h2></div>
		
		<p>Untuk mendapatkan single record menggunakan method:</p>
<pre>
getOne( table_name, where_argument, fields );
</pre>
		<p>Keterangan Method ini:</p>
		<p><strong>table_name</strong> adalah string nama tabel yang akan diquery.</p>
		<p><strong>where_argument</strong> adalah array dari argument "WHERE". Contoh: WHERE id = '1' AND status = '0' maka array-nya adalah array('id' => '1', 'status' => '0') Nilai default parameter ini adalah null atau tidak ada argument "WHERE"</p>
		<p><strong>fields</strong> adalah array dari filed yang akan didapatkan. Nilai default argument ini adalah all (*). Untuk query seperti:</p>
<pre>
SELECT id, name, status FROM ....
</pre>
		<p>Nilai array-nya adalah:</p>
<pre>
array('id', 'name', 'status')
</pre>
		<p>Maka untuk query seperti ini:</p>
<pre>
"SELECT id, name, status FROM table_name WHERE id = '1' AND status = '0'"
</pre>
		<p>Penggunaan method getOne-nya adalah:</p>
		
<pre>		
$data = $this->db->getOne('table_name', array('id' => 1, 'status' => '0'), array('id', 'name', 'status') );<br />
echo $data->id;<br />
echo $data->name;<br />
echo $data->status;<br />
</pre>
	    </div>
	    
	    <div class="row-fluid">
                <div class="page-header"><h2 id="getAll">Get All</h2></div>
		
		<p>Untuk query seperti:</p>
<pre>
"SELECT id, name, email FROM table_name WHERE status = '1'"
</pre>
		<p>Maka penggunaan Method getAll-nya adalah:</p>
<pre>
$data = $this->db->getAll('table_name', array('id' => 1, 'email' => 'budi@budi.com'), array('field_1', 'field_2'));
foreach ($data as $data) {
    echo $data->field_1;
    echo $data->field_2;
}
</pre>
	    </div>
	    
	    <div class="row-fluid">
                <div class="page-header"><h2 id="insert">Insert</h2></div>
		
		<p>Untuk menambahkan data baru dengan cara:</p>
<pre>
$query = $this->db->insert('table_name', array('name' => 'jhon', 'email' => 'budi@budi.com'));
</pre>
		<p>Method ini adalah abstraksi dari SQL:</p>
<pre>
INSERT INTO table_name (name, email) VALUES ('jhon', 'budi@budi.com')
</pre>
	    </div>
	    
	    <div class="row-fluid">
                <div class="page-header"><h2 id="update">Update</h2></div>
		<p>Untuk melakukan update record dengan cara:</p>
<pre>
$query = $this->db->update('table_name', array('name' => 'jhon gmail', 'email' => 'jhon@gmail.com'), array('id' => 6));
</pre>
		
		<p>Method ini adalah abstraksi dari SQL:</p>
<pre>
UPDATE table_name SET name = 'budi', email = 'budi@budi.com' WHERE id = 6
</pre>
		<p>Kriteria juga bisa di-passing ke dalam method <a href="#where">$this->db->where()</a>.</p>
<pre>
$this->db->where('id', '>', 1, 'AND');<br />
$this->db->where('id', '<', 10);<br />
$this->db->update('table_name', array('status' => 'visited') ); 
</pre>
		<p>Hasil abstraksi SQL:</p>
<pre>
UPDATE table_name SET status = 'visited' WHERE id > 1 AND id < 10
</pre>
		
	    </div>
	    <div class="row-fluid">
		<div class="page-header"><h2 id="delete">Delete</h2></div>
		<p>Untuk menghapus record dengan cara:</p>
<pre>
$query = $this->db->delete('table_name', array('id' => '6'));
</pre>
		
		<p>Method ini adalah abstraksi dari SQL:</p>
<pre>
DELETE FROM table_name WHERE id = 6
</pre>
		<p>Atau menggunakan method <a href="#where">$this->db->where()</a>.</p>
<pre>
$this->db->where('id', '>', 1, 'AND');<br />
$this->db->where('id', '<', 10);<br />
$this->db->delete('table_name');
</pre>
		<p>Hasil abstraksi SQL:</p>
<pre>
DELETE FROM table_name WHERE id > 1 AND id < 10
</pre>
	    </div>
	    
            
	<div class="row-fluid">
            <div class="page-header" id="discussion">
                <h2>Diskusi</h2>
            </div>
	    <div id="disqus_thread"></div>
	</div>
      </div>
    </div>
    <hr>
    <footer>
	<p>Menemukan typo? atau ingin menambahkan informasi di halaman ini? silahkan <a href="https://github.com/panada/documentation/blob/master/classes/database/query_builder.html">fork dan edit</a>.</p>
    </footer>
</div>
<script>
var disqus_url = 'classes/database/query_builder.html';
</script>
<script src="../../../jquery.js"></script>
<script src="../../../bootstrap/js/bootstrap.min.js"></script>
<script src="../../../panada.js"></script>
</body>
</html>